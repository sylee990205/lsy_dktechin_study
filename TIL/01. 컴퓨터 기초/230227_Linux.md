# Linux 
## 목차
<!-- TOC -->

- [Linux](#linux)
    - [목차](#%EB%AA%A9%EC%B0%A8)
    - [Linux](#linux)
        - [개요](#%EA%B0%9C%EC%9A%94)
        - [특징&구조](#%ED%8A%B9%EC%A7%95%EA%B5%AC%EC%A1%B0)
    - [실습환경](#%EC%8B%A4%EC%8A%B5%ED%99%98%EA%B2%BD)
        - [가상머신](#%EA%B0%80%EC%83%81%EB%A8%B8%EC%8B%A0)
    - [Linux 기본 명령어](#linux-%EA%B8%B0%EB%B3%B8-%EB%AA%85%EB%A0%B9%EC%96%B4)
        - [출력 명령어](#%EC%B6%9C%EB%A0%A5-%EB%AA%85%EB%A0%B9%EC%96%B4)
        - [생성 명령어](#%EC%83%9D%EC%84%B1-%EB%AA%85%EB%A0%B9%EC%96%B4)
        - [이동 명령어](#%EC%9D%B4%EB%8F%99-%EB%AA%85%EB%A0%B9%EC%96%B4)
        - [삭제 명령어](#%EC%82%AD%EC%A0%9C-%EB%AA%85%EB%A0%B9%EC%96%B4)
        - [기타 명령어](#%EA%B8%B0%ED%83%80-%EB%AA%85%EB%A0%B9%EC%96%B4)
    - [사용자 변경](#%EC%82%AC%EC%9A%A9%EC%9E%90-%EB%B3%80%EA%B2%BD)
    - [File Permission](#file-permission)
    - [Link](#link)
        - [inode](#inode)
        - [Link](#link)
    - [파일 묶기](#%ED%8C%8C%EC%9D%BC-%EB%AC%B6%EA%B8%B0)
    - [파일 위치 검색](#%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98-%EA%B2%80%EC%83%89)
    - [vi Editor](#vi-editor)
    - [Linux 시스템의 부팅 과정](#linux-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98-%EB%B6%80%ED%8C%85-%EA%B3%BC%EC%A0%95)
            - [systemd와 런레벨](#systemd%EC%99%80-%EB%9F%B0%EB%A0%88%EB%B2%A8)

<!-- /TOC -->
---
## 1. Linux
### 1.1 개요
- Linux는 핀란드 헬싱키 대학교 학생이었던 Linus Benedict Torvalds가 처음 개발한 운영체제
- 배포판
    - Linux 배포판은 크게 데비안 계열과 레드햇 계열로 분류된다
    - 데비안 계열: ubuntu, Mint 등
    - 레드햇: 페도라 Core, CentOS
    - 우리나라에선 레드햇 계열을 많이 사용한다. 
### 1.2 특징&구조
 - 리눅스의 특징
    - 공개 소프트웨어로 무료 사용 가능
    - 유닉스와 호환성을 유지
    - 서버용 운영체제로 많이 사용됨
    - 편리한 GUI 환경
 - 리눅스의 구조 
    - 커널, 셸, 응용프로그램으로 이루어짐
        | 구조      | 설명                                                            |
        | ------- | ------------------------------------------------------------- |
        | 커널      | **리눅스의 핵심**<br>프로세스, 메모리, 파일 시스템, 장치 관리<br>컴퓨터의 모든 자원 초기화 및 제어 기능 |
        | 셸       | 사용자 인터페이스<br>명령 해석, 프로그래밍<br>기본 셸을 배시 셸이라 함                   |
        | 응용 프로그램 | 각종 프로그래밍 개발 도구<br>문서 편집 도구                                    |
---

## 2. 실습환경
Linux 배포판 중 CentOS를 이용하여 실습하였음 windows 환경에 CentOS를 직접 설치하는데에 시간 소요가 커 가상 머신으로 실습을 진행함.
### 2.1 가상머신
- PC에 설치된 기본 운영 체제에 가상의 머신을 생성하여 다른 운영체제를 설치할 수 있도록 해주는 응용 프로그램
- 가상 머신에는 VMware, 버추얼 PC, 버추얼 박스 등이 있고 VMware를 사용함
---

## 3. Linux 기본 명령어
### 1. 출력 명령어
1. pwd
- print working directory, 현재 폴더를 출력한다. 현재 내가 위치한 폴더의 명이 무엇인지 확인 가능
  ```
  [root@localhost ~]$ pwd
  ```
  - 이 때 ~ 는 home 루트라는 뜻이다.
2. ls
- list, 폴더의 파일 목록을 출력한다. 폴더와 파일 모두 출력된다.
  ```
   [root@localhost ~]$ ls
    ```
    - ls 뒤에 옵션을 붙일 수 있다.\
    - 자주 사용하는 옵션
  
        | 옵션  | 설명                                                        |
        | --- | --------------------------------------------------------- |
        | \-a | hidden 파일까지 출력된다.<br>파일명 앞에 .이 붙은 파일이 hidden 파일이다. |
        | \-l | 파일의 상세 내용까지 함께 출력된다.                        |
        | \-R | 위치한 디렉토리 하부의 디렉토리의 파일까지 모두 출력된다.                          |
        | \-h | 파일크기를 해석하기 편하게 출력된다.                                      |
        | \-r | 출력 결과를 내림차순으로 정렬한다.                                       |
        | \-t | 출력 결과를 파일이 수정된 시간을 기준으로 정렬한다                              |
    - 옵션은 함께 사용 가능하다. 
    ```
   [root@localhost ~]$ ls -al
    ```
    - 현재 디렉토리의 hidden 파일을 포함한 모든 파일 및 상세 내용 출력
3. cat
- 파일의 내용을 출력한다.
  ```
  [root@localhost ~]$ cat [파일명]
  ```

   
### 2. 생성 명령어
1. touch
- 파일 생성 또는 수정 시간 변경
  ```
  [root@localhost ~]$ touch [파일명]
  ```
2. mkdir
 - make directory, 폴더를 생성한다. 
     ```
      [root@localhost ~]$ mkdir [폴더 명]
      ```
    -  이 때 폴더 명을 여러개 입력하면 복수의 폴더를 생성할 수 있다.

### 3. 이동 명령어
1. cd
- change directory, 현재 폴더를 변경한다.
  ```
  [root@localhost ~]$ cd [폴더명]
  ```
  - 폴더명을 입력하지 않으면 home 디렉토리로 변경, 폴더명 대신 ~ 를 입력해도 home 디렉토리로 변경됨.
  - 폴더명 대신 ...을 입력하면 상위 폴더로 변경
  - 폴더명 대신 / 를 입력하면 루트 폴더로 변경

### 4. 삭제 명령어
1. rm
- remove, 파일을 삭제한다.
  ```
  [root@localhost ~]$ rm [파일명]
  ```
  - 파일명을 여러개 입력하면 여러개의 파일을 한번에 삭제할 수 있다.
  - 파일명 대신 확장자로 삭제할 대상을 선택할 수 있다. *.txt 를 입력하면 모든 텍스트 파일이 삭제된다.
2. rmdir
- remove directory, 폴더를 삭제한다.
  ```
  [root@localhost ~]$ rmdir [폴더명]
  ```
  - 비어있는 폴더를 삭제하는 명령어다.
  - 만약 비어있지않은 폴더를 삭제하려면 옵션을 붙여야한다
    ```
    [root@localhost ~]$ rmdir -rf [폴더명]
    ```
     - -rf는 강제 삭제 옵션

### 5. 기타 명령어
1. cp
- copy, 파일 또는 폴더를 복사
    ```
  [root@localhost ~]$ cp [복사할 대상의 이름]
  ```
2. mv
- move, 파일이나 폴더의 위치, 이름을 변경. 
  ```
   [root@localhost ~]$ mv [이동할 파일][이동 될 위치]

   or
   
   [root@localhost ~]$ mv [기존 파일 명][변경할 파일 명]
   ```
3. clear
- 현재 셸 화면을 비운다.
  ```
  [root@localhost ~]$ clear
  ```
4. man
- manual, Linux 명령어를 출력한다. help 임.
  ```
  [root@localhost ~]$ man
  ```
---
## 4. 사용자 변경
- 리눅스는 기본적으로 root 라는 superuser가 있으며, 이 유저는 모든 작업을 할 수 있는 권한을 가짐.
- superuser로 변경
  ```
  [root@localhost ~]$ cd /
  [root@localhost /]$ su
  Password:
  [root@localhost /]# exit
  [root@localhost /]$ 
  ```
  - superuser로 변경은 루트 폴더에서 가능하다.
  - su 명령어를 입력하면 superuser로 변경이 가능하고 이 때 superuser의 비밀번호를 입력해야한다.
  - 비밀번호 입력시 화면에 표시되지 않음
  - superuser 로의 전환이 성공하면 $이 #으로 변경되는데 이 #이 현재 유저가 superuser임을 의미한다.
  - superuser 인 상태에서 exit 를 입력하면 기존 유저로 다시 변경된다.
---
## 5. File Permission
- 파일 목록 출력 시 -l 옵션을 부여하면 파일의 상세 내용 출력됨을 알 수 있었다. 그 때 출력되는 파일의 상세 내용은 아래와 같다.
- ex
  ```
  [root@localhost ~]# ls -l
  합 계: 2
  -rwxr--r-- 1 root root    0 9월 16 13:50 myfile.txt
  drwxr-xr-x 2 root root 4096 8월  8 11:56 다운로드
  ```
  - 이때 내용을 해석하면
    | \-                 | rwxr--r--                  | 1    | root      | root     | 0     | 9월 16 13:50    | myfile.txt |
    | ------------------ | -------------------------- | ---- | --------- | -------- | ----- | -------------- | ---------- |
    | 파일 유형              | 파일 접근 권한                      | 링크 수 | 파일 소유자 이름 | 파일 그룹 이름 | 파일 크기 | 마지막 변경 날짜 / 시간 | 파일 이름      |
    | \- : 파일<br>d: 디렉토리<br>l: 링크 | 3개씩 나눠진다.<br>유저 / 루트 / 그 외 |      |           |          |       |                |

1. 파일 접근 권한 
   - 파일 접근 권한은 읽기, 쓰기, 실행 3가지로 구성된다
        | 권한 | 표기 | 환산 | 의미      | 파일 권한의 의미              | 디렉토리 권한의 의미              |
        | -- | -- | -- | ------- | ---------------------- | ------------------------ |
        | 읽기 | r  | 4  | read    | 파일을 읽거나 복사할 수 있다       | ls 명령어로 디렉토리 목록을 볼 수 있다. |
        | 쓰기 | w  | 2  | write   | 파일을 수정, 이동, 삭제 할 수 있다. | 파일을 생성하거나 삭제할 수 있다.      |
        | 실행 | x  | 1  | execute | 파일을 실행할 수 있다.          | cd 명령을 사용할 수 있다.         |
    - 권한은 환산하여 표기하는데, 3개씩 나눠 표기한다.
    - 만약 권한이 rwxr--r--이라면 -는 0으로 처리하고 나머지는 각 환산에 맞춰 744가 된다.

2. 권한 변경
    - 권한을 변경할 땐 chmod 라는 명령어를 사용한다. (chmod - Change Mod) 
    ```
    [root@localhost ~]$ chmod [권한값][변경하고자 하는 파일 혹은 디렉토리 명]
    ```
    - 만약 모든 사용자에게 읽기, 쓰기, 실행 권한을 부여하고자 한다면 chmod 777 [파일명]
    - 소유자만 모든 권한을 갖고 그 외 사용자는 읽기 권한만 부여하고자 한다면 chmod 744 [파일명]
    - 파일에 맞게 설정이 가능하다.
---
## 6. Link
### inode
- Link에 대하여 이해하기 전에 inode를 먼저 알아야 한다.
- inode는 파일의 고유 번호로 ls -i 명령어를 사용해 확인할 수 있다.
  
### Link
   - 파일의 링크에는 하드 링크와 심볼릭 링크가 있다.
  1. 하드 링크 (Hard Link)
  ```
  [root@localhost ~]# ln [링크 대상 파일 이름][링크 파일 이름]
  ```
  - 하드 링크 파일은 파일 유형이 -로 하나의 파일로 취급된다.
  - 링크 대상 파일과 하드 링크 파일은 같은 inode를 가진다.
  - 만약 하드 링크 파일을 수정하면 원본 파일 역시 수정된다.
  - 원본 파일을 삭제해도 하드 링크 파일엔 영향이 없다. (하나의 파일로 취급되기 때문)

  2. 심볼릭 링크 (Symbolic Link)
   ```
     [root@localhost ~]# ln -s [링크 대상 파일 이름][링크 파일 이름]
```
  - 심볼릭 링크 파일은 파일 유형이 l 로 링크이다.
  - 심볼릭 링크 파일은 새로운 inode를 가진다.
  - 원본 파일이 삭제되면 심볼릭 링크는 기능을 잃는다.
  - windows 의 바로가기
---
## 7. 파일 묶기
 - tar 명령어
1. 파일 묶기
    ```
    [root@localhost ~]# tar cvf [묶인 파일 명][묶을 파일 명]
    ```
    - tar 명령을 사용하면 파일이 묶이는 것으로 압축하는 것과는 다르다. linux 에서 압축은 별개의 프로그램으로 수행된다.
    - 위 과정 수행 시 묶인 파일의 확장자는 .tar 이다.
    - 여러 디렉토리를 한번에 묶을 수 있다.
2. 파일 풀기
    ```
    [root@localhost ~]# tar xvf [풀을 파일 명]
    ```
    - 현재 디렉토리에 tar 파일이 풀린다.
    - 파일명 뒤에 디렉토리를 작성해 풀을 디렉토리를 지정할 수 있다.
---
## 8. 파일 위치 검색
- find 명령어
  ```
  [root@localhost ~]# find [경로][옵션][조건]
  ```
  - 경로 대신 .을 입력하면 현재 디렉토리로 지정된다.
  - 옵션으로는 -name(파일명), -user(소유자), -perm(허가권), -size(크기) 등을 사용할 수 있다.
  - 원하는 옵션을 선택 후 조건란에 찾고자 하는 조건을 입력하면 해당하는 파일만 검색할 수 있다.
---
## 9. vi Editor
 Linux의 셸 창에서 파일의 내용을 작성하고자 할 때 vi Editor 모드를 사용한다.  
  - vi editor 실행
    ```
    [root@localhost ~]# vi [파일명]
    ```
    vi 명령어를 통해 vi 에디터를 실행시킬 수 있다.
 - Editor 실행 시 명령모드로 실행되고 이 때 입력 모드로 전환하는 키를 입력해야 파일 내용을 작성할 수 있다.
   - 명령모드 -> 입력모드
        | 명령어 | 동작                 |
        | --- | ------------------ |
        | i   | 커서 자리에 입력모드        |
        | a   | 커서 뒤로 입력모드         |
        | o   | 커서 다음으로 오픈 라인 생성   |
        | I   | 커서위치 라인 첫컬럼에서 입력모드 |
        | A   | 커서위치 마지막 컬럼에서 입력모드 |
        | O   | 커서위치 앞으로 라인 생성     |
 - 입력모드는 esc 를 눌러 종료할 수 있다. 다시 명령모드로 돌아오게 된다.
 - 명령모드 상태에서 커서를 이동하고 싶을 땐 화살표로도 이동이 가능하지만 명령어로도 가능하다.
    - 이동 명령어
        | 명령어 | 동작                                   |
        | --- | ------------------------------------ |
        | ^   | 현재 행의 첫 컬럼으로 이동                      |
        | $   | 현재 행의 마지막 컬럼으로 이동                    |
        | w   | 다음 단어로 이동                            |
        | 10G | 10라인으로 이동                            |
        | :10 | 10라인으로 이동<br>이때 : 은 마지막 행 모드로 변경하는 것 |
- 명령 모드에서 내용을 수정하고자 할 때도 명령어를 사용해 가능하다.
    | 명령어 | 동작                    |
    | --- | --------------------- |
    | cw  | 단어 수정                 |
    | cc  | 현재 전체 라인 수정           |
    | r   | 현재 글자를 다른 글자로 수정      |
    | x   | 한 글자 삭제               |
    | dw  | 한 단어 삭제               |
    | dd  | 한 라인 삭제               |
    | #dd | \# 자리 입력한 숫자만큼의 라인 삭제 |
    | yy  | 현재 라인을 버퍼로 복사         |
    | #yy | \# 자리 입력한 숫자만큼의 라인 복사 |
    | p   | 버퍼의 내용을 붙여넣기          |
- 마지막 행 모드에서 파일 내용을 검색할 수 있다.
  - 마지막 행 모드는 :, / 등으로 진입이 가능하다.
  - 검색을 하고자 할땐 /로 마지막 행 모드에 진입 후 찾고자 하는 문자열을 입력하면 된다.
  - /string
  - n 으로 다음 위치를 검색하고 N 으로 이전 위치를 검색할 수 있다.
- vi editor 로 작업 후 파일을 저장 및 종료하고 싶을 때에도 마지막 행 모드에서 작업할 수 있다.
    | 명령어      | 동작             |
    | -------- | -------------- |
    | :w       | 파일 저장          |
    | :w [파일명] | 파일 이름을 지정하여 저장 |
    | :q       | 종료             |
    | :wq      | 파일을 저장하고 종료    |
---
## 10. Linux 시스템의 부팅 과정
- Linux 시스템의 부팅 과정은 다음과 같다.  
    - 전원 ON - 바이오스 - 부트 로더 - 커널 초기화 - systemd 서비스 단계 - 로그인 프롬포트 출력
1. 바이오스
   - BIOS, Basic Input / Output System
   - 바이오스는 장착된 기본적인 하드웨어의 상태를 확인한 후 부팅 장치를 선택하여 부팅 디스크의 첫 섹터에서 512 바이트를 로딩한다.
  
2. 부트 로더
   - 바이오스 단계에서 MBR은 부트 로더를 찾아 메모리에 로딩한다.
   - 부트 로더는 여러 운영체제 중에서 부팅할 운영체제를 선택할 수 있도록 메뉴를 제공한다.
   - 부트 로더는 리눅스 커널을 메모리에 로딩한다.
   - 리눅스의 대표적인 부트로더로 GRUB와 LILO가 있다.
     - GRUB
       - 전통적인 LILO의 단점을 보완하여 GNU 프로젝트의 일환으로 개발됨
  
3. 커널 초기화
     - 커널은 가장 먼저 시스템에 연결된 메모리, 디스크, 키보드, 마우스 등 장치들을 검사한다.
     - 기본적인 초기화 과정이 끝나면 프로세스와 스레드를 생성한다.
       - 이 프로세스들은 메모리 관리와 같은 커널의 여러 가지 동작을 수행한다.
       - 셸 창에서 실행중인 프로세스를 검색할 수 있다. 
        ```
        [root@localhost ~]# ps -ef
        ```
        - 커널이 생성한 프로세스들은 일반적인 프로세스와 구분되도록 대괄호로 표시한다.
4. systemd 서비스 단계
   - 해당 단계에 이르면 리눅스가 본격적으로 동작한다.
   - systemd에서 d는 deamon을 의미하며 deamon은 background 에서 실행되는 프로세스다.
   - systemd 유닛
     - systemd는 전체 시스템을 시작하고 관리하는데 unit이라 부르는 구성 요소를 사용한다.
     - 관리 대상의 이름을 '서비스 이름.유닛 종류' 의 형태로 관리한다.
   - systemctl
     - systemd를 기반으로 서비스를 시작하거나 종료할 때 사용하는 명령
     - 명령어로는 start, stop, reload, restart, status, isolate, kill 등이 있다.
    #### systemd와 런레벨
    - ststemctl 명령어 중 isolate를 사용하여 런레벨 변경이 가능하다.  
    
        | 런레벨 | target 파일 (심볼릭 링크) | target 원본 파일      |
        | --- | ------------------ | ----------------- |
        | 0   | runlevel0.target   | poweroff.target   |
        | 1   | runlevel1.target   | rescue.target     |
        | 2   | runlevel2.target   | multi-user.target |
        | 3   | runlevel3.target   |
        | 4   | runlevel4.target   |
        | 5   | runlevel5.target   | graphical.target  |
        | 6   | runlevel6.target   | reboot.target     |
    - 보통의 Linux 환경은 런레벨 5이다.
    - 안전모드로 부팅하고자 할 때 런레벨을 1로 변경하면 안전모드 부팅이 가능하다.
    ```
    [root@localhost ~]# systemcl isolate rescue.target
    ```
5. 로그인 프롬포트 출력
   - 그래픽 로그인 시스템인 GDM을 동작시키고, 로그인 프롬포트를 출력한다.